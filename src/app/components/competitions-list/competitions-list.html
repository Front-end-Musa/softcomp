<div class="events">
  <h1 class="title">Upcoming Events</h1>
  <ng-container *ngIf="status | async as s">
    <div class="status" *ngIf="s === 'loading'"><mat-spinner></mat-spinner></div>
    <div class="status error" *ngIf="s === 'error'">
      Error loading events. Please try again later.
    </div>

    <ul class="events-list" *ngIf="s === 'loaded' || s === 'init'">
      <li class="events-list__item" *ngFor="let event of events | async">
        <article class="event-card" role="article" aria-label="{{ event.name }}">
          <div class="card-body">
            <h3 class="event-title">{{ event.name }}</h3>
            <div class="meta">
              <time class="event-date badge"><mat-icon>event</mat-icon>{{ event.date | date : 'mediumDate' }}</time>
              <span class="badge"><mat-icon>location_on</mat-icon>{{ event.location }}</span>
              <span class="badge"><mat-icon>group</mat-icon>{{ event.participants.length || 0 }} registered</span>
            </div>  
          </div>

          <div class="card-footer">
            <div class="participants">
              <span class="dot" *ngIf="event.status === 'open'"></span>
              <span class="count">{{ event.status}}</span>
            </div>
            <button class="btn-details" (click)="goToEventDetails(event.id)" *ngIf="event.id">
              Details
            </button>
          </div>
        </article>
      </li>
    </ul>
  </ng-container>
</div>
